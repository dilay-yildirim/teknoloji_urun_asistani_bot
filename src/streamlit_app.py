# src/streamlit_app.py
import streamlit as st
from rag_query import ProductAssistant

st.set_page_config(page_title="TÃ¼rkÃ§e ÃœrÃ¼n AsistanÄ±", layout="centered")
st.title("ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e ÃœrÃ¼n AsistanÄ± (RAG Chatbot)")

assistant = ProductAssistant(k=5)

query = st.text_input("ÃœrÃ¼n hakkÄ±nda ne merak ediyorsun?")

if st.button("Cevapla") and query.strip():
    with st.spinner("Cevap oluÅŸturuluyor..."):
        try:
            # Asistan yanÄ±tÄ±
            res = assistant.ask(query)

            st.subheader("ğŸ’¬ AsistanÄ±n YanÄ±tÄ±")
            st.write(res["answer"])

            st.subheader("ğŸ“š KullanÄ±lan Yorumlar")
            for i, h in enumerate(res["hits"][:5]):
                st.markdown(f"**Yorum {i+1}:** {h['doc'][:400]}...")
        except Exception as e:
            st.error(f"Bir hata oluÅŸtu: {e}")
